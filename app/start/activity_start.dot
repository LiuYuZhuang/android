digraph ActivityStart {

  subgraph Launcher {
    node [style=filled];
    color = blue;
    label = "Launcher";

    a1[label="ActivityManagerProxy.startActivity"]
  }

  subgraph system_server {
    node [style=filled];
    color = lightgrey;
    label = "system_server";

    b1[label="ActivityManagerService.startProccess"]
    b2[label="ActivityManagerService.realStartActivityLocked"]
    b3[label="ApplicationThreadProxy.scheduleLaunchActivity"]

    b1 -> b2 -> b3;
  }

  subgraph zygote {
    node [style=filled];
    color = lightgrey;
    label = "zygote";

    c1[label="zygote::fork"]
  }

  subgraph AppMainThread {
    node [style=filled];
    color = lightgrey;

    d1[label="ApplicationThread.scheduleLaunchActivity"]
    d2[label="ActivityThread.handleLunchActivity"]
    d3[label="Activity.onCreate"]
    d4[label="ActivityManagerProxy.attachApplication"]
    d1 -> d2 -> d3;
  }

  start -> a1;
  a1 -> b1;
  b1 -> c1;
  c1 -> d4;
  d4 -> b2;
  b3 -> d1;
  d3 -> end;

  start [shape=Mdiamond];
  end [shape=Msquare];
}